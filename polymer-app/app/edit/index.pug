//-
  @license
  Copyright (c) 2016 The Polymer Project Authors. All rights reserved.
  This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
  The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
  The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
  Code distributed by Google as part of the polymer project is also
  subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt

doctype html
html(lang="en")
  head
    meta(charset="utf-8")
    meta(name="viewport", content="width=device-width, minimum-scale=1, initial-scale=1, user-scalable=no")

    title %{D4L_APP_TITLE}%
    meta(name="description", content="Social media tools for activists for #ge17")

    link(rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png")
    link(rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png")
    link(rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png")

    //- See https://goo.gl/OOhYW5
    link(rel="manifest", href="/manifest.json")

    //- See https://goo.gl/qRE0vM
    meta(name="theme-color", content="#e4003b")

    //- Twitter card
    meta(name="twitter:card", value="summary_large_image")
    meta(name="twitter:site", content="@UKLabour")
    meta(name="twitter:title", content="%{D4L_APP_TITLE}% – Labour’s tool for supporters")
    meta(name="twitter:description", content="Change your profile pictures and get tweeting for Labour now.")
    meta(name="twitter:creator", content="@UkLabour")
    //-Twitter summary card with large image must be at least 280x150px -->
    meta(name="twitter:image:src", content="%{D4L_BUTTRESS_URL}%/images/dashboard-promo.png")

    <!-- Open Graph data -->
    meta(property="fb:app_id", content="%{D4L_FACEBOOK_APP_ID}%")
    meta(property="og:title", content="%{D4L_APP_TITLE}% – Labour’s tool for supporters")
    meta(property="og:type", content="article")
    meta(property="og:url", content="%{D4L_BUTTRESS_URL}%")
    meta(property="og:image", content="%{D4L_BUTTRESS_URL}%/images/dashboard-promo.png")
    meta(property="og:description", content="Change your profile pictures and get tweeting for Labour now.")

    //- Add to homescreen for Chrome on Android. Fallback for manifest.json
    meta(name="mobile-web-app-capable", content="yes")
    meta(name="application-name", content="%{D4L_APP_TITLE}%")

    //- Add to homescreen for Safari on iOS -->
    meta(name="apple-mobile-web-app-capable", content="yes")
    meta(name="apple-mobile-web-app-status-bar-style", content="black-translucent")
    meta(name="apple-mobile-web-app-title", content="%{D4L_APP_TITLE}%")

    //- Homescreen icons -->
    link(rel="apple-touch-icon", href="/images/manifest/icon-48x48.png")
    link(rel="apple-touch-icon", sizes="72x72", href="/images/manifest/icon-72x72.png")
    link(rel="apple-touch-icon", sizes="96x96", href="/images/manifest/icon-96x96.png")
    link(rel="apple-touch-icon", sizes="144x144", href="/images/manifest/icon-144x144.png")
    link(rel="apple-touch-icon", sizes="192x192", href="/images/manifest/icon-192x192.png")

    //- Tile icon for Windows 8 (144x144 + tile color) -->
    meta(name="msapplication-TileImage", content="/images/manifest/icon-144x144.png")
    meta(name="msapplication-TileColor", content="#e4003b")
    meta(name="msapplication-tap-highlight", content="no")

    link(href="https://fonts.googleapis.com/css?family=Raleway:300,500,700", rel="stylesheet")

    script.
      window.Polymer = {rootPath: '/'};

      if ('serviceWorker' in navigator) {
        window.addEventListener('load', function() {
          navigator.serviceWorker.register('service-worker.js', {
            scope: Polymer.rootPath,
          });
        });
      }

    script(src="/bower_components/webcomponentsjs/webcomponents-loader.js")

    link(rel="import" href="/src/d4l-app/d4l-app.html")

    style.
      body {
        margin: 0;
        font-family: 'Raleway', 'Lato', sans-serif;
        line-height: 1.5;
        min-height: 100vh;
      }

  body
    script.
      window.fbAsyncInit = function() {
        FB.init({
          appId      : '%{D4L_FACEBOOK_APP_ID}%',
          cookie     : true,
          xfbml      : true,
          version    : 'v2.8'
        });
        FB.AppEvents.logPageView();
      };

      (function(d, s, id){
        var js, fjs = d.getElementsByTagName(s)[0];
        if (d.getElementById(id)) {return;}
        js = d.createElement(s); js.id = id;
        js.src = "//connect.facebook.net/en_US/sdk.js";
        fjs.parentNode.insertBefore(js, fjs);
      }(document, 'script', 'facebook-jssdk'));

    d4l-app

